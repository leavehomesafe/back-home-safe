{"version":3,"sources":["components/Button.tsx","components/Place.tsx","containers/Welcome/index.tsx","assets/cross.svg","assets/tick.svg","assets/crossBlack.svg","assets/greenTick.svg","containers/Confirm/AutoLeaveModal.tsx","containers/Confirm/LeaveModal.tsx","components/DatePicker.tsx","containers/Confirm/TimePickModal.tsx","assets/checkbox.svg","assets/checkboxChecked.svg","components/CheckBox.tsx","containers/Confirm/index.tsx","utils/qr.ts","assets/qrOverlay.svg","components/QRCodeReader.tsx","assets/back.svg","components/Header.tsx","containers/QRReader/index.tsx","assets/plus.svg","components/PWAPrompt.tsx","hooks/useInstallPrompt.ts","assets/baseIcon.png","containers/QRGeneartor/QRPreview.tsx","containers/QRGeneartor/index.tsx","App.tsx","utils/app-check.ts","serviceWorkerRegistration.ts","index.tsx"],"names":["ConfirmButton","styled","button","props","disabled","shadowed","ModalConfirmButton","Place","value","onChange","placeholder","readOnly","rest","StyledInput","e","target","async","TextareaAutosize","Welcome","useState","place","setPlace","PageWrapper","ContentWrapper","Msg","ActionWrapper","isEmpty","trim","to","pathname","search","LinkWrapper","StyledLink","StyledDivider","orientation","flexItem","div","Divider","Link","AutoLeaveModal","isModalOpen","onCancel","onConfirm","selectedAutoLeaveHour","date","autoLeaveHourTmp","setAutoLeaveHourTmp","useEffect","toDate","useMemo","add","isOpen","onRequestClose","style","overlay","backgroundColor","content","outline","border","padding","borderRadius","width","position","top","left","transform","height","overflow","ariaHideApp","onAfterOpen","root","document","querySelector","disableBodyScroll","CrossWrapper","Cross","src","crossBlack","onClick","Title","HourListWrapper","id","HourList","map","hour","HourListItem","SelectedTick","greenTick","TimeWrapper","format","img","h1","ul","li","LeaveModal","onLeaveNow","onLeaved","autoLeaveHour","shouldDisplayAutoLeave","Time","AutoLeave","GreenButton","DatePicker","forwardRef","ref","useImperativeHandle","init","ele","Picker","inline","rows","Wrapper","className","TimePickModal","datePickerRef","useRef","current","TimePickerWrapper","CheckBox","checked","handleClick","isAndroid","StyledCheckbox","color","IOSCheckBox","checkboxChecked","checkbox","Checkbox","Confirm","browserHistory","useHistory","browserLocation","useLocation","autoLeave","setAutoLeave","setAutoLeaveHour","isAutoLeaveModalOpen","setIsAutoLeaveModalOpen","isLeaveModalOpen","setIsLeaveModalOpen","isTimePickModalOpen","setIsTimePickModalOpen","URLSearchParams","get","push","dayjs","handleLeavePage","cross","MessageWrapper","PlaceWrapper","TickWrapper","TickWrapperInner","Tick","tick","ActionGroup","CheckBoxWrapper","Change","LeaveMessage","Header","getVenueName","input","startsWith","decodedJson","venueId","substring","computedHash","getHash","base64Data","json","JSON","parse","decodeURIComponent","escape","window","atob","console","log","decodedData","hashMatch","hash","qrDecode","trimmedZhName","nameZh","nameEn","string","sha256","qrEncode","typeEn","typeZh","type","venueCode","venueID","metadata","btoa","unescape","encodeURIComponent","stringify","getUserMedia","constraints","navigator","mediaDevices","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Promise","resolve","reject","call","Error","QRCodeReader","onDecode","videoRef","canvasRef","useRafLoop","canvasElement","videoElement","readyState","HAVE_ENOUGH_DATA","canvas","getContext","videoHeight","videoWidth","drawImage","imageData","getImageData","code","jsQR","data","inversionAttempts","loopStop","loopStart","video","facingMode","audio","then","stream","srcObject","play","catch","alert","getTracks","forEach","track","stop","Video","playsInline","Canvas","name","backPath","BackButton","back","QRReader","Message","VideoContainer","Overlay","qrOverlay","PWAPrompt","onDismiss","prompt","setState","handleBeforeInstallPrompt","preventDefault","handleAppInstalled","addEventListener","removeEventListener","useInstallPrompt","promptToInstall","onInstall","useCallback","AddIcon","plus","InstructionWrapper","InstallButtonWrapper","Button","variant","QRPreview","onLeave","imgRef","encodedString","QrCodeWithLogo","image","logo","customImg","baseIcon","logoRadius","borderSize","toImage","StyledPlace","StyledQrCode","alt","Address","addressZh","addressEn","QRGenerator","fileFieldRef","React","showPreview","setShowPreview","qrCode","setQrCode","useSetState","state","isVenueCodeValid","length","isVenueIdValid","isValidData","useMount","StyledForm","StyledTextField","label","error","inputProps","maxLength","StyledInputWrapper","StyledFileInput","accept","files","Array","from","head","reader","FileReader","readAsDataURL","onload","String","result","Actions","ButtonGroup","aria-label","size","startIcon","downloadImage","FormGroup","TextField","App","matchMedia","matches","test","location","hostname","showPWAPrompt","setShowPWAPrompt","adapter","browserDetails","browser","version","GlobalStyle","basename","exact","path","createGlobalStyle","isLocalhost","Boolean","match","refreshing","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","confirm","postMessage","onUpdate","onSuccess","reload","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","fetch","headers","response","contentType","status","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.b2211950.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const ConfirmButton = styled.button<{ shadowed?: boolean }>`\n  display: block;\n  margin: auto;\n  margin-bottom: 16px;\n  font-size: 24px;\n  padding: 10px 0;\n  width: 80%;\n  border-radius: 48px;\n  flex-shrink: 0;\n  max-width: 280px;\n  font-weight: 500;\n\n  ${(props) =>\n    props.disabled\n      ? `background-color: #D3D3D3;\n        color: #A1A1A1;\n        `\n      : `\n        background-color: #fed426;\n      `}\n\n  border: 0;\n  outline: none;\n  ${(props) =>\n    props.shadowed ? \"box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\" : \"\"}\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n`;\n\nexport const ModalConfirmButton = styled(ConfirmButton)`\n  font-size: 16px;\n  padding: 12px 0;\n  width: 90%;\n  font-weight: unset;\n`;\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport TextareaAutosize from \"react-autosize-textarea\";\n\ntype Props = {\n  value: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n  readOnly?: boolean;\n};\n\nexport const Place = ({\n  value,\n  onChange,\n  placeholder,\n  readOnly,\n  ...rest\n}: Props) => {\n  return (\n    <StyledInput\n      value={value}\n      placeholder={placeholder}\n      readOnly={readOnly}\n      onChange={(e: any) => {\n        onChange && onChange(e.target.value);\n      }}\n      async\n      {...rest}\n    />\n  );\n};\n\nexport const StyledInput = styled(TextareaAutosize)`\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 4px 0;\n  color: #fed426;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  width: 100%;\n\n  padding-left: 0;\n  padding-right: 0;\n  line-height: 36px;\n  font-weight: 500;\n\n  &:focus {\n    outline: none;\n  }\n`;\n","import { Divider } from \"@material-ui/core\";\nimport { isEmpty, trim } from \"ramda\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { Place } from \"../../components/Place\";\n\nexport const Welcome = () => {\n  const [place, setPlace] = useState(\"\");\n\n  return (\n    <PageWrapper>\n      <ContentWrapper>\n        <Msg>我想去</Msg>\n        <Place value={place} onChange={setPlace} placeholder=\"輸入地址\" />\n      </ContentWrapper>\n      <ActionWrapper>\n        {isEmpty(trim(place)) ? (\n          <ConfirmButton disabled shadowed>\n            話去就去!\n          </ConfirmButton>\n        ) : (\n          <Link to={{ pathname: \"/confirm\", search: `?place=${place}` }}>\n            <ConfirmButton shadowed>話去就去!</ConfirmButton>\n          </Link>\n        )}\n        <LinkWrapper>\n          <StyledLink to=\"/qrReader\">掃瞄二維碼</StyledLink>\n          <StyledDivider orientation=\"vertical\" flexItem />\n          <StyledLink to=\"/qrGenerator\">生成二維碼</StyledLink>\n        </LinkWrapper>\n      </ActionWrapper>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst ActionWrapper = styled.div`\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  padding: 40px 0;\n  flex-shrink: 0;\n`;\n\nconst LinkWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n`;\n\nconst StyledDivider = styled(Divider)`\n  margin: 0 8px;\n\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n\n  &.MuiDivider-root {\n    background-color: #fff;\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  color: #ffffff;\n  padding: 0 16px;\n`;\n","export default __webpack_public_path__ + \"static/media/cross.d2bbc7f7.svg\";","export default __webpack_public_path__ + \"static/media/tick.6d45b966.svg\";","export default __webpack_public_path__ + \"static/media/crossBlack.aafc0aee.svg\";","export default __webpack_public_path__ + \"static/media/greenTick.5e528318.svg\";","import React, { useState, useEffect, useMemo } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\nimport greenTick from \"../../assets/greenTick.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport { Dayjs } from \"dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: (value: number) => void;\n  selectedAutoLeaveHour: number;\n  date: Dayjs;\n};\n\nexport const AutoLeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onConfirm,\n  selectedAutoLeaveHour,\n  date,\n}: Props) => {\n  const [autoLeaveHourTmp, setAutoLeaveHourTmp] = useState(\n    selectedAutoLeaveHour\n  );\n\n  useEffect(() => {\n    setAutoLeaveHourTmp(selectedAutoLeaveHour);\n  }, [setAutoLeaveHourTmp, selectedAutoLeaveHour]);\n\n  const handleConfirm = () => {\n    onConfirm(autoLeaveHourTmp);\n  };\n\n  const toDate = useMemo(() => date.add(autoLeaveHourTmp, \"hour\"), [\n    date,\n    autoLeaveHourTmp,\n  ]);\n\n  const disableScroll = () => {\n    const root = document.querySelector(\"#scroll\");\n    if (!root) return;\n    disableBodyScroll(root);\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"370px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={disableScroll}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>設罝自動離開時間</Title>\n      <HourListWrapper id=\"scroll\">\n        <HourList>\n          {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((hour) => (\n            <HourListItem\n              onClick={() => {\n                setAutoLeaveHourTmp(hour);\n              }}\n              key={hour}\n            >\n              + {hour}小時\n              {autoLeaveHourTmp === hour && <SelectedTick src={greenTick} />}\n            </HourListItem>\n          ))}\n        </HourList>\n      </HourListWrapper>\n      <TimeWrapper>\n        <div>於{date.format(\"MM-DD HH:mm\")} 進入場所</div>\n        <div>於{toDate.format(\"MM-DD HH:mm\")} 自動離開</div>\n      </TimeWrapper>\n      <ModalConfirmButton onClick={handleConfirm}>確認</ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.h1`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 0;\n`;\n\nconst HourListWrapper = styled.div`\n  overflow: auto;\n  height: 180px;\n  padding: 0 8px;\n`;\n\nconst HourList = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst HourListItem = styled.li`\n  line-height: 40px;\n  border-bottom: 1px #eeeeee solid;\n  padding: 0 8px;\n`;\n\nconst TimeWrapper = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 16px 0;\n`;\n\nconst SelectedTick = styled.img`\n  height: 32px;\n  position: relative;\n  float: right;\n  top: 4px;\n`;\n","import React, { useMemo } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { Dayjs } from \"dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onLeaveNow: () => void;\n  onLeaved: () => void;\n  place: string;\n  date: Dayjs;\n  autoLeaveHour: number;\n};\n\nexport const LeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onLeaveNow,\n  onLeaved,\n  place,\n  date,\n  autoLeaveHour,\n}: Props) => {\n  const shouldDisplayAutoLeave = autoLeaveHour !== 0;\n\n  const toDate = useMemo(() => date.add(autoLeaveHour, \"hour\"), [\n    date,\n    autoLeaveHour,\n  ]);\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: shouldDisplayAutoLeave ? \"430px\" : \"390px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Msg>你已進入場所</Msg>\n      <Place>{place}</Place>\n      <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n      <Title>你現在要離開嗎？</Title>\n      {shouldDisplayAutoLeave && (\n        <AutoLeave>於{toDate.format(\"MM-DD HH:mm\")} 自動離開</AutoLeave>\n      )}\n      <ModalConfirmButton onClick={onLeaveNow}>\n        是的，我現在要離開\n      </ModalConfirmButton>\n      <GreenButton onClick={onLeaved}>我現已經離開了</GreenButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin: 64px 0;\n  font-weight: 500;\n`;\n\nconst GreenButton = styled(ModalConfirmButton)`\n  background-color: #12b188;\n  color: #fff;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n`;\n\nconst Msg = styled.div`\n  text-align: center;\n  font-size: 16px;\n`;\n\nconst Time = styled.div`\n  text-align: center;\n  font-size: 14px;\n`;\n\nconst Place = styled.div`\n  color: unset;\n  text-shadow: none;\n  text-align: center;\n  font-size: 28px;\n  font-weight: 500;\n  line-height: 48px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst AutoLeave = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 12px 0;\n`;\n","import React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport styled from \"styled-components\";\nimport Picker from \"pickerjs\";\nimport \"pickerjs/dist/picker.min.css\";\n\nexport type DatePickerHandler = {\n  init: () => void;\n};\n\nexport const DatePicker = forwardRef((props: any, ref: any) => {\n  // mount effect wont work on model, need to call this after onAfterOpen event\n  useImperativeHandle(ref, () => ({\n    init: () => {\n      const ele = document.querySelector(\n        \".js-inline-picker\"\n      ) as HTMLElement | null;\n      if (!ele) return;\n      new Picker(ele, {\n        inline: true,\n        rows: 2,\n      });\n    },\n  }));\n\n  return (\n    <Wrapper>\n      <div className=\"js-inline-picker\" />\n    </Wrapper>\n  );\n});\n\nconst Wrapper = styled.div`\n  & .picker {\n    font-size: 12px;\n  }\n\n  & .picker-dialog {\n    border: 0;\n  }\n\n  & .picker-cell:before {\n    background-image: unset;\n  }\n\n  & .picker-cell:after {\n    background-image: unset;\n  }\n\n  & .picker-picked {\n    color: unset;\n    border-top: #12b188 1px solid;\n    border-bottom: #12b188 1px solid;\n  }\n\n  & .picker-cell {\n    padding: 0 4px;\n  }\n\n  & .picker-item {\n    padding: 3px 0px;\n  }\n\n  & .picker-cell + .picker-cell {\n    border: 0;\n  }\n`;\n","import React, { useRef } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { DatePicker, DatePickerHandler } from \"../../components/DatePicker\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: () => void;\n};\n\nexport const TimePickModal = ({ isModalOpen, onCancel, onConfirm }: Props) => {\n  const datePickerRef = useRef<DatePickerHandler>(null);\n\n  const initPicker = () => {\n    datePickerRef.current && datePickerRef.current.init();\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"280px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={initPicker}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>你是什麼時候離開？</Title>\n      <TimePickerWrapper>\n        <DatePicker ref={datePickerRef} />\n      </TimePickerWrapper>\n      <ModalConfirmButton onClick={onConfirm}>確認</ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 24px;\n`;\n\nconst TimePickerWrapper = styled.div`\n  border-bottom: 1px #eeeeee solid;\n  border-top: 1px #eeeeee solid;\n  padding: 32px 0;\n  margin: 16px 0;\n`;\n","export default __webpack_public_path__ + \"static/media/checkbox.4e2450ab.svg\";","export default __webpack_public_path__ + \"static/media/checkboxChecked.7f6c2da0.svg\";","import React from \"react\";\nimport styled from \"styled-components\";\nimport checkbox from \"../assets/checkbox.svg\";\nimport checkboxChecked from \"../assets/checkboxChecked.svg\";\nimport { isAndroid } from \"react-device-detect\";\nimport { Checkbox } from \"@material-ui/core\";\n\ntype Props = {\n  checked: boolean;\n  onChange: (value: boolean) => void;\n};\n\nexport const CheckBox = ({ onChange, checked }: Props) => {\n  const handleClick = () => {\n    onChange(!checked);\n  };\n\n  return isAndroid ? (\n    <StyledCheckbox checked={checked} onClick={handleClick} color=\"primary\" />\n  ) : (\n    <IOSCheckBox\n      src={checked ? checkboxChecked : checkbox}\n      onClick={handleClick}\n    />\n  );\n};\n\nconst IOSCheckBox = styled.img`\n  height: 32px;\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px;\n`;\n\nconst StyledCheckbox = styled(Checkbox)`\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px !important;\n  padding: 0 !important;\n\n  &.MuiCheckbox-colorPrimary {\n    color: #fff !important;\n  }\n`;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport styled from \"styled-components\";\nimport cross from \"../../assets/cross.svg\";\n\nimport tick from \"../../assets/tick.svg\";\n\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { Place } from \"../../components/Place\";\nimport { AutoLeaveModal } from \"./AutoLeaveModal\";\nimport { LeaveModal } from \"./LeaveModal\";\nimport { TimePickModal } from \"./TimePickModal\";\nimport { isEmpty, trim } from \"ramda\";\nimport { CheckBox } from \"../../components/CheckBox\";\nimport dayjs from \"dayjs\";\n\nexport const Confirm = () => {\n  const browserHistory = useHistory();\n  const browserLocation = useLocation();\n  const [autoLeave, setAutoLeave] = useState(true);\n  const [autoLeaveHour, setAutoLeaveHour] = useState(4);\n  const [isAutoLeaveModalOpen, setIsAutoLeaveModalOpen] = useState(false);\n  const [isLeaveModalOpen, setIsLeaveModalOpen] = useState(false);\n  const [isTimePickModalOpen, setIsTimePickModalOpen] = useState(false);\n\n  const place = useMemo(\n    () => trim(new URLSearchParams(browserLocation.search).get(\"place\") || \"\"),\n    [browserLocation.search]\n  );\n\n  useEffect(() => {\n    if (!place || isEmpty(place)) browserHistory.push(\"/\");\n  }, [browserHistory, place]);\n\n  const date = useMemo(() => dayjs(), []);\n\n  const handleSetAutoLeaveHour = (value: number) => {\n    setAutoLeaveHour(value);\n    setIsAutoLeaveModalOpen(false);\n  };\n\n  const handleLeavePage = () => {\n    browserHistory.push(\"/\");\n  };\n\n  const handleLeaved = () => {\n    setIsLeaveModalOpen(false);\n    setIsTimePickModalOpen(true);\n  };\n\n  return (\n    <>\n      <PageWrapper>\n        <Header>\n          <Link to=\"/\">\n            <Cross src={cross} />\n          </Link>\n        </Header>\n        <MessageWrapper>\n          <Msg>你已進入場所</Msg>\n          <PlaceWrapper>\n            <Place value={place || \"\"} readOnly />\n          </PlaceWrapper>\n          <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n        </MessageWrapper>\n        <TickWrapper>\n          <TickWrapperInner>\n            <Tick src={tick} />\n          </TickWrapperInner>\n        </TickWrapper>\n        <ActionGroup>\n          <AutoLeave>\n            <CheckBoxWrapper>\n              <CheckBox checked={autoLeave} onChange={setAutoLeave} />\n              {autoLeaveHour}小時後自動離開\n            </CheckBoxWrapper>\n            <Change\n              onClick={() => {\n                setIsAutoLeaveModalOpen(true);\n              }}\n            >\n              變更\n            </Change>\n          </AutoLeave>\n          <ConfirmButton\n            shadowed\n            onClick={() => {\n              setIsLeaveModalOpen(true);\n            }}\n          >\n            離開\n          </ConfirmButton>\n          <LeaveMessage>當你離開時請緊記按\"離開\"</LeaveMessage>\n        </ActionGroup>\n      </PageWrapper>\n      <AutoLeaveModal\n        isModalOpen={isAutoLeaveModalOpen}\n        onCancel={() => {\n          setIsAutoLeaveModalOpen(false);\n        }}\n        onConfirm={handleSetAutoLeaveHour}\n        selectedAutoLeaveHour={autoLeaveHour}\n        date={date}\n      />\n      <LeaveModal\n        isModalOpen={isLeaveModalOpen}\n        onCancel={() => {\n          setIsLeaveModalOpen(false);\n        }}\n        onLeaveNow={handleLeavePage}\n        onLeaved={handleLeaved}\n        place={place || \"\"}\n        date={date}\n        autoLeaveHour={autoLeave ? autoLeaveHour : 0}\n      />\n      <TimePickModal\n        isModalOpen={isTimePickModalOpen}\n        onCancel={() => {\n          setIsTimePickModalOpen(false);\n        }}\n        onConfirm={handleLeavePage}\n      />\n    </>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 24px;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Tick = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 110px;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst Time = styled.div`\n  color: #ffffff;\n  text-align: center;\n`;\n\nconst AutoLeave = styled.div`\n  margin-bottom: 16px;\n  width: 100%;\n  max-width: 380px;\n  margin: 16px auto;\n  display: flex;\n  flex-shrink: 0;\n  font-size: 14px;\n`;\n\nconst CheckBoxWrapper = styled.div`\n  width: 100%;\n  text-align: left;\n  padding-left: 24px;\n  line-height: 32px;\n`;\n\nconst Change = styled.div`\n  flex-shrink: 0;\n  padding-right: 24px;\n  line-height: 32px;\n`;\n\nconst LeaveMessage = styled.div`\n  text-align: center;\n  padding-bottom: 40px;\n  flex-shrink: 0;\n`;\n\nconst ActionGroup = styled.div`\n  width: 100%;\n  flex-shrink: 0;\n`;\n","import { isEmpty, trim } from \"ramda\";\nimport { sha256 } from \"js-sha256\";\n\ntype DecodedJSON = {\n  hash: string;\n  metadata: { typeEn: string; typeZh: string };\n  nameEn: string;\n  nameZh: string;\n  type: string;\n};\n\nexport type EncodeParam = {\n  typeEn: string;\n  typeZh: string;\n  nameEn: string;\n  nameZh: string;\n  type: string;\n  venueCode: string;\n  venueID: string;\n};\n\nexport type EnhancedEncodeParam = EncodeParam & {\n  addressEn: string;\n  addressZh: string;\n  customImg: string | null;\n};\n\n// https://github.com/aaasssdddwww/back-home-safe/pull/7\nexport const qrDecode = (input: string): DecodedJSON | null => {\n  if (!input.startsWith(\"HKEN:\")) return null;\n  const venueId = input.substring(6, 14);\n  const computedHash = getHash(venueId);\n\n  const base64Data = input.substring(14);\n  const json: DecodedJSON = JSON.parse(\n    decodeURIComponent(escape(window.atob(base64Data)))\n  );\n\n  console.log({\n    input,\n    venueId,\n    decodedData: json,\n    computedHash,\n    hashMatch: computedHash === json.hash,\n  });\n\n  return json;\n};\n\nexport const getVenueName = (input: string) => {\n  if (!input.startsWith(\"HKEN:\")) return \"\";\n  const decodedJson = qrDecode(input);\n  if (!decodedJson) return \"\";\n\n  const trimmedZhName = decodedJson.nameZh ? trim(decodedJson.nameZh) : \"\";\n  const name = !isEmpty(trimmedZhName) ? trimmedZhName : decodedJson.nameEn;\n\n  return name;\n};\n\n// http://blog.headuck.com/2020/11/19/%e3%80%8c%e5%ae%89%e5%bf%83%e5%87%ba%e8%a1%8c%e3%80%8d%e8%83%bd%e5%90%a6%e5%ae%89%e5%bf%83%e4%bd%bf%e7%94%a8%ef%bc%9f%ef%bc%88%e4%ba%8c%ef%bc%89/?__cf_chl_captcha_tk__=872d5919c48d1b25116c910c9de6c92e2b27facf-1613591353-0-AcPHoKV7LGMua5u8nTgTCYJXS9ZaCBaNSavb3A1E6F6HLsITHuJ9oA-SH4uu4UqnYiphktotJfPYaSUxQSmcfTk6y8iVJb873VgLU0qrdjxU6pZjBx5UxwqLDXom03026Z7EFmoHq70-CVMFVFPdTLHLXkIEYDFHZeqU0RE5KUjOwoJpOIFRLfsXwtRYGefQtspNIySZCg6u5sSDpxdRNc5dpOfdN2dybpb0G5T7j2URLhglnm7gH_chBuLNtSg-awOlrCk7Ljktwxte6lQj6AoNG2Cbqry8_-VvWdPX_1BdDfQ3apJvfUewJ6AIqHfDclXLrRril2vcMckHgrgvATQa4rcOr6AwzaZBcf90sfp3bnNQw59oszIkaV3Dzb8TrJlm4jWq42q3ijXTUua1WKWPDBzDBNl1SjLtar-AI3kzrgwFgaXkWkAxakLyTBJ7wszVHo0DHdCtE_Ozma4VkIZWZSF_gZ3dgBeAbBdwW8XTPsliqfplIeHsML8uJ2dAlxxPIcDDJ7a0gYr2YK4Jdl1ot568DfdMOuzhoMzy2OJKT9YFITl4k0Zger3M5kjSUPjgAOjB4j4p2M6kla2DERXhQj0IRi-sXG92OWEX5-Joa4x41eMqH6X6La4CaSfamwyN3gSwFtBfxvPA2V-Hss3Vj4zEgGs75oxSS7ZrUwbwOORal3VPYiWHzaif0qbWw93UBfuMgfsAyJnvAa5TntFPz3PZqpY9rg6gExJSaKFGBKAnOxyitUe1BDt0rW76u_qay7xF1WlCGCtIasM82E5nF1X51J_sXcAMwmZyG29b\nexport const getHash = (venueId: string) => {\n  const string = `HKEN${venueId}2020`;\n  return sha256(string);\n};\n\nexport const qrEncode = ({\n  typeEn,\n  typeZh,\n  nameEn,\n  nameZh,\n  type,\n  venueCode,\n  venueID,\n}: EncodeParam) => {\n  const json = {\n    metadata: !isEmpty(typeEn) || !isEmpty(typeZh) ? { typeEn, typeZh } : null,\n    nameZh,\n    nameEn,\n    type,\n    hash: getHash(venueID),\n  };\n\n  const base64Data = window.btoa(\n    unescape(encodeURIComponent(JSON.stringify(json)))\n  );\n\n  return `HKEN:${venueCode}${venueID}${base64Data}`;\n};\n","export default __webpack_public_path__ + \"static/media/qrOverlay.185cc3ea.svg\";","import React, { useEffect, useRef } from \"react\";\nimport jsQR, { QRCode } from \"jsqr\";\nimport styled from \"styled-components\";\nimport { useRafLoop } from \"react-use\";\n\ntype Props = {\n  onDecode: (code: QRCode) => void;\n};\n\n// ref: https://ithelp.ithome.com.tw/articles/10239258\nconst OldGetUserMedia = () =>\n  navigator.getUserMedia ||\n  (navigator as any).webkitGetUserMedia ||\n  (navigator as any).mozGetUserMedia ||\n  (navigator as any).msGetUserMedia;\n\n// Initializes media stream.\nconst getUserMedia = (constraints: MediaStreamConstraints) => {\n  if (\"mediaDevices\" in navigator) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n  // 相容處理，依照新接口\n  (navigator as any).mediaDevices = {};\n\n  (navigator as any).mediaDevices.getUserMedia = (\n    constraints: MediaStreamConstraints\n  ) => {\n    const getUserMedia = OldGetUserMedia();\n\n    // 不支援的情況下\n    if (!getUserMedia) {\n      return Promise.reject(\n        new Error(\"getUserMedia is not implemented in this browser\")\n      );\n    }\n\n    // 保持跟原先api一樣故將其封裝成promise\n    return new Promise(function (resolve, reject) {\n      getUserMedia.call(navigator, constraints, resolve, reject);\n    });\n  };\n\n  return (navigator as any).mediaDevices.getUserMedia(constraints);\n};\n\nexport const QRCodeReader = ({ onDecode }: Props) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [loopStop, loopStart] = useRafLoop(() => {\n    const canvasElement = canvasRef.current;\n    const videoElement = videoRef.current;\n\n    if (\n      canvasElement &&\n      videoElement &&\n      videoElement.readyState === videoElement.HAVE_ENOUGH_DATA\n    ) {\n      const canvas = canvasElement.getContext(\"2d\");\n      if (!canvas) return;\n\n      canvasElement.height = videoElement.videoHeight;\n      canvasElement.width = videoElement.videoWidth;\n      canvas.drawImage(\n        videoElement,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      const imageData = canvas.getImageData(\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n      const code = jsQR(imageData.data, imageData.width, imageData.height, {\n        inversionAttempts: \"dontInvert\",\n      });\n\n      if (code) {\n        onDecode(code);\n      }\n    }\n  }, false);\n\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    if (videoElement) {\n      getUserMedia({ video: { facingMode: \"environment\" }, audio: false })\n        .then((stream: MediaStream) => {\n          if (!videoElement) return;\n          videoElement.srcObject = stream;\n          videoElement.play();\n          loopStart();\n        })\n        .catch((e: Error) => {\n          alert(\"Unable to activate camera.\\n\\n\" + e);\n        });\n    }\n\n    return () => {\n      loopStop();\n      if (videoElement) {\n        const stream = videoElement.srcObject as MediaStream | null;\n        if (!stream) return;\n        const tracks = stream.getTracks();\n\n        tracks.forEach((track) => {\n          track.stop();\n        });\n\n        videoElement.srcObject = null;\n      }\n    };\n  }, [loopStart, loopStop, videoRef]);\n\n  return (\n    <>\n      <Video ref={videoRef} playsInline />\n      <Canvas ref={canvasRef} />\n    </>\n  );\n};\n\nconst Video = styled.video`\n  /* Make video to at least 100% wide and tall */\n  min-width: 100%;\n  min-height: 100%;\n\n  /* Setting width & height to auto prevents the browser from stretching or squishing the video */\n  width: auto;\n  height: auto;\n\n  /* Center the video */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Canvas = styled.canvas`\n  display: none;\n`;\n","export default __webpack_public_path__ + \"static/media/back.7bf7a56f.svg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport back from \"../assets/back.svg\";\n\ntype Props = {\n  name: string;\n  backPath: string;\n};\n\nexport const Header = ({ name, backPath }: Props) => {\n  return (\n    <Wrapper>\n      <Link to={backPath}>\n        <BackButton src={back} />\n      </Link>\n      {name}\n    </Wrapper>\n  );\n};\n\nconst BackButton = styled.img`\n  height: 20px;\n  top: 14px;\n  left: 16px;\n  position: absolute;\n`;\n\nconst Wrapper = styled.div`\n  color: #ffffff;\n  background-color: #12b188;\n  text-align: center;\n  line-height: 48px;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  flex-shrink: 0;\n`;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { getVenueName } from \"../../utils/qr\";\nimport qrOverlay from \"../../assets/qrOverlay.svg\";\nimport { QRCodeReader } from \"../../components/QRCodeReader\";\nimport { QRCode } from \"jsqr\";\nimport { isEmpty } from \"ramda\";\nimport { Header } from \"../../components/Header\";\n\nexport const QRReader = () => {\n  const browserHistory = useHistory();\n\n  const handleScan = ({ data }: QRCode) => {\n    if (!data || isEmpty(data)) return;\n    const place = getVenueName(data);\n    if (isEmpty(place)) return;\n    browserHistory.push({ pathname: \"/confirm\", search: `?place=${place}` });\n  };\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"掃瞄二維碼\" />\n      <Message>掃瞄二維碼</Message>\n      <VideoContainer>\n        <Overlay />\n        <QRCodeReader onDecode={handleScan} />\n      </VideoContainer>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst VideoContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst Overlay = styled.div`\n  /* The image used */\n  background-image: url(\"${qrOverlay}\");\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  z-index: 50;\n  position: relative;\n`;\n\nconst Message = styled.div`\n  position: absolute;\n  z-index: 51;\n  bottom: 20%;\n  width: 100%;\n  text-align: center;\n  color: #ffffff;\n  font-size: 16px;\n`;\n","export default __webpack_public_path__ + \"static/media/plus.abd4712a.svg\";","import { Button } from \"@material-ui/core\";\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport plus from \"../../src/assets/plus.svg\";\nimport { useInstallPrompt } from \"../hooks/useInstallPrompt\";\n\ntype Props = {\n  onDismiss: () => void;\n};\n\nexport const PWAPrompt = ({ onDismiss }: Props) => {\n  const [prompt, promptToInstall] = useInstallPrompt();\n\n  const onInstall = useCallback(() => {\n    if (!prompt) return;\n    promptToInstall();\n  }, [prompt, promptToInstall]);\n\n  return (\n    <Wrapper>\n      <AddIcon src={plus} />\n      <div>新增至主畫面先啦</div>\n      <div>唔係點似個App</div>\n      <InstructionWrapper>\n        <div>IOS</div>\n        <div>{\"用Safari開=>分享=>新增至主畫面\"}</div>\n        <div>Android</div>\n        <div>{\"用Chrome開=>右上選項=>新增至主畫面/安裝應用程式\"}</div>\n        {prompt && (\n          <InstallButtonWrapper>\n            <Button variant=\"contained\" onClick={onInstall}>\n              安裝\n            </Button>\n          </InstallButtonWrapper>\n        )}\n      </InstructionWrapper>\n      <div>\n        <Button variant=\"contained\" onClick={onDismiss}>\n          我知我做緊乜，俾我入去\n        </Button>\n      </div>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  vertical-align: middle;\n  flex-direction: column;\n  text-align: center;\n  color: #fff;\n`;\n\nconst AddIcon = styled.img`\n  width: 100px;\n  margin: 0 auto 32px auto;\n`;\n\nconst InstallButtonWrapper = styled.div`\n  margin-top: 12px;\n`;\n\nconst InstructionWrapper = styled.div`\n  font-size: 12px;\n  margin: 24px 0;\n`;\n","import { useEffect, useState } from \"react\";\n\ninterface IBeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  readonly userChoice: Promise<{\n    outcome: \"accepted\" | \"dismissed\";\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\nexport const useInstallPrompt = (): [\n  IBeforeInstallPromptEvent | null,\n  () => void\n] => {\n  const [prompt, setState] = useState<IBeforeInstallPromptEvent | null>(null);\n\n  const promptToInstall = () => {\n    if (prompt) {\n      return prompt.prompt();\n    }\n    return Promise.reject(\n      new Error(\n        'Tried installing before browser sent \"beforeinstallprompt\" event'\n      )\n    );\n  };\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e: IBeforeInstallPromptEvent) => {\n      e.preventDefault();\n      setState(e);\n    };\n\n    const handleAppInstalled = (e: Event) => {\n      e.preventDefault();\n      console.log(\"app installed\");\n      setState(null);\n    };\n\n    window.addEventListener(\n      \"beforeinstallprompt\",\n      handleBeforeInstallPrompt as any\n    );\n\n    window.addEventListener(\"appinstalled\", handleAppInstalled);\n\n    return () => {\n      window.removeEventListener(\n        \"beforeinstallprompt\",\n        handleBeforeInstallPrompt as any\n      );\n\n      window.removeEventListener(\"appinstalled\", handleAppInstalled);\n    };\n  }, []);\n\n  return [prompt, promptToInstall];\n};\n","export default __webpack_public_path__ + \"static/media/baseIcon.aa0e0793.png\";","import { isEmpty } from \"ramda\";\nimport React, { useEffect, useRef } from \"react\";\nimport { Place } from \"../../components/Place\";\nimport cross from \"../../assets/cross.svg\";\n\nimport { EnhancedEncodeParam, qrEncode } from \"../../utils/qr\";\nimport styled from \"styled-components\";\nimport QrCodeWithLogo from \"qrcode-with-logos\";\nimport baseIcon from \"../../assets/baseIcon.png\";\n\ntype Props = {\n  data: EnhancedEncodeParam;\n  onLeave: () => void;\n};\n\nexport const QRPreview = ({ data, onLeave }: Props) => {\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  useEffect(() => {\n    if (!imgRef.current) return;\n\n    const encodedString = qrEncode(data);\n\n    new QrCodeWithLogo({\n      image: imgRef.current,\n      content: encodedString,\n      width: 380,\n      logo: {\n        src: data.customImg || baseIcon,\n        logoRadius: 8,\n        borderSize: 0,\n      },\n    }).toImage();\n  }, [data]);\n\n  return data ? (\n    <PageWrapper>\n      <Header>\n        <Cross src={cross} onClick={onLeave} />\n      </Header>\n      <MessageWrapper>\n        <PlaceWrapper>\n          {data.nameEn && !isEmpty(data.nameZh) && (\n            <StyledPlace value={data.nameZh || \"\"} readOnly />\n          )}\n          {data.nameEn && !isEmpty(data.nameEn) && (\n            <StyledPlace value={data.nameEn || \"\"} readOnly />\n          )}\n        </PlaceWrapper>\n      </MessageWrapper>\n      <TickWrapper>\n        <TickWrapperInner>\n          <StyledQrCode ref={imgRef} alt=\"qrCode\" />\n        </TickWrapperInner>\n      </TickWrapper>\n      <Address>\n        {data.addressZh && !isEmpty(data.addressZh) && (\n          <div>{data.addressZh}</div>\n        )}\n        {data.addressEn && !isEmpty(data.addressEn) && (\n          <div>{data.addressEn}</div>\n        )}\n      </Address>\n    </PageWrapper>\n  ) : (\n    <></>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n  background-color: #12b188;\n  position: absolute;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 24px;\n`;\n\nconst StyledPlace = styled(Place)`\n  font-size: 20px;\n  line-height: 20px;\n  text-shadow: none;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 280px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst StyledQrCode = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 300px;\n  margin: 0 auto;\n`;\n\nconst Address = styled.div`\n  width: 100%;\n  height: 50%;\n  text-align: center;\n`;\n","import {\n  Button,\n  ButtonGroup,\n  Divider,\n  FormGroup,\n  TextField,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useSetState, useMount } from \"react-use\";\nimport styled from \"styled-components\";\nimport { Header } from \"../../components/Header\";\nimport { EnhancedEncodeParam, qrEncode } from \"../../utils/qr\";\nimport QrCodeWithLogo from \"qrcode-with-logos\";\nimport baseIcon from \"../../assets/baseIcon.png\";\nimport { head } from \"ramda\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport { QRPreview } from \"./QRPreview\";\n\nexport const QRGenerator = () => {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const fileFieldRef = React.useRef<HTMLInputElement>(null);\n\n  const [showPreview, setShowPreview] = useState(false);\n  const [qrCode, setQrCode] = useState<QrCodeWithLogo | null>(null);\n  const [state, setState] = useSetState<EnhancedEncodeParam>({\n    typeEn: \"Stores/Shopping Malls\",\n    typeZh: \"商店/商場\",\n    nameEn: \"CityWalk\",\n    nameZh: \"荃新天地\",\n    type: \"IMPORT\",\n    venueCode: \"0\",\n    venueID: \"WHBvLDSa\",\n    addressEn: \"1 & 18 Yeung Uk Rd, Tsuen Wan, Hong Kong\",\n    addressZh: \"荃灣楊屋道1號\",\n    customImg: null,\n  });\n\n  const isVenueCodeValid = state.venueCode.length === 1;\n  const isVenueIdValid = state.venueID.length === 8;\n\n  const isValidData = isVenueCodeValid && isVenueIdValid;\n\n  useMount(() => {\n    const root = document.querySelector(\"#scroll\");\n    if (!root) return;\n    disableBodyScroll(root);\n  });\n\n  useEffect(() => {\n    if (!imgRef.current || !isValidData) return;\n    const encodedString = qrEncode(state);\n\n    const qrCode = new QrCodeWithLogo({\n      image: imgRef.current,\n      content: encodedString,\n      width: 380,\n      logo: {\n        src: state.customImg || baseIcon,\n        logoRadius: 8,\n        borderSize: 0,\n      },\n    });\n\n    qrCode.toImage();\n    setQrCode(qrCode);\n  }, [state, isValidData]);\n\n  const handleFileSelected = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const img = head(files);\n    if (!img) {\n      setState({ customImg: null });\n    } else {\n      const reader = new FileReader();\n      reader.readAsDataURL(img);\n      reader.onload = () => setState({ customImg: String(reader.result) });\n    }\n  };\n\n  const handleDownload = () => {\n    if (!qrCode) return;\n    qrCode.downloadImage(\"QR Code\");\n  };\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"生成二維碼\" />\n      <ContentWrapper id=\"scroll\">\n        <StyledForm>\n          <StyledTextField\n            label=\"場所種類(中文) (typeZh)\"\n            value={state.typeZh}\n            onChange={(e) => {\n              setState({ typeZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所種類(英文) (typeEn)\"\n            value={state.typeEn}\n            onChange={(e) => {\n              setState({ typeEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所名字(中文) (nameZh)\"\n            value={state.nameZh}\n            onChange={(e) => {\n              setState({ nameZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所名字(英文) (nameEn)\"\n            value={state.nameEn}\n            onChange={(e) => {\n              setState({ nameEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所地址(中文) (預覽用)\"\n            value={state.addressZh}\n            onChange={(e) => {\n              setState({ addressZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所地址(英文) (預覽用)\"\n            value={state.addressEn}\n            onChange={(e) => {\n              setState({ addressEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"類型\"\n            value={state.type}\n            onChange={(e) => {\n              setState({ type: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場地編碼 (唔知唔好搞)\"\n            value={state.venueCode}\n            onChange={(e) => {\n              setState({ venueCode: e.target.value });\n            }}\n            error={!isVenueCodeValid}\n            inputProps={{\n              maxLength: 1,\n            }}\n          />\n          <StyledTextField\n            label=\"場地ID (唔知唔好搞)\"\n            value={state.venueID}\n            onChange={(e) => {\n              setState({ venueID: e.target.value });\n            }}\n            error={!isVenueIdValid}\n            inputProps={{\n              maxLength: 8,\n            }}\n          />\n          <StyledInputWrapper>\n            <div>自定Icon</div>\n            <StyledFileInput\n              type=\"file\"\n              name=\"avatar\"\n              accept=\"image/png, image/jpeg\"\n              ref={fileFieldRef}\n              onChange={handleFileSelected}\n            />\n          </StyledInputWrapper>\n        </StyledForm>\n        <Divider />\n        <Actions>\n          <ButtonGroup aria-label=\"outlined primary button group\">\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<SaveIcon />}\n              onClick={handleDownload}\n              disabled={!isValidData}\n            >\n              儲存\n            </Button>\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<SaveIcon />}\n              onClick={() => {\n                setShowPreview(true);\n              }}\n              disabled={!isValidData}\n            >\n              預覽\n            </Button>\n          </ButtonGroup>\n        </Actions>\n        <StyledQrCode ref={imgRef} alt=\"qrCode\" />\n      </ContentWrapper>\n      {showPreview && (\n        <QRPreview\n          data={state}\n          onLeave={() => {\n            setShowPreview(false);\n          }}\n        />\n      )}\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n`;\n\nconst StyledForm = styled(FormGroup)`\n  padding: 8px 16px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  &.MuiFormControl-root {\n    margin-top: 8px;\n  }\n`;\n\nconst StyledInputWrapper = styled.div`\n  font-size: 12px;\n  padding: 4px 0;\n  color: rgba(0, 0, 0, 0.54);\n`;\n\nconst StyledFileInput = styled.input`\n  padding: 4px 0;\n`;\n\nconst StyledQrCode = styled.img`\n  width: 100%;\n`;\n\nconst Actions = styled.div`\n  margin-top: 16px;\n  display: flex;\n  justify-content: center;\n`;\n","import React, { useState, useEffect } from \"react\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Route, HashRouter, Switch, Redirect } from \"react-router-dom\";\nimport { Welcome } from \"./containers/Welcome\";\nimport { Confirm } from \"./containers/Confirm\";\nimport { QRReader } from \"./containers/QRReader\";\nimport { PWAPrompt } from \"./components/PWAPrompt\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport adapter from \"webrtc-adapter\";\nimport { QRGenerator } from \"./containers/QRGeneartor\";\nimport { checkPwaInstalled } from \"./utils/app-check\";\n\nfunction App() {\n  const [showPWAPrompt, setShowPWAPrompt] = useState(!checkPwaInstalled());\n\n  useEffect(() => {\n    console.log(adapter.browserDetails.browser, adapter.browserDetails.version);\n  }, []);\n\n  useEffect(() => {\n    const root = document.querySelector(\"#root\");\n    if (!root) return;\n    disableBodyScroll(root);\n  }, []);\n\n  return (\n    <>\n      <GlobalStyle />\n      {showPWAPrompt ? (\n        <PWAPrompt\n          onDismiss={() => {\n            setShowPWAPrompt(false);\n          }}\n        />\n      ) : (\n        <HashRouter basename=\"/\">\n          <Switch>\n            <Route exact path=\"/\">\n              <Welcome />\n            </Route>\n            <Route exact path=\"/qrReader\">\n              <QRReader />\n            </Route>\n            <Route exact path=\"/qrGenerator\">\n              <QRGenerator />\n            </Route>\n            <Route exact path=\"/confirm\">\n              <Confirm />\n            </Route>\n            <Redirect to=\"/\" />\n          </Switch>\n        </HashRouter>\n      )}\n    </>\n  );\n}\n\nexport default App;\n\nconst GlobalStyle = createGlobalStyle`\nhtml {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  font-family: Noto Sans, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color:#12b188;\n  width: 100%;\n  height: 100%;\n}\n\ntextarea{\n  font-family: Noto Sans, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n}\n\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\na {\n  text-decoration: none;\n}\n`;\n","export const checkPwaInstalled = () => {\n  const isInstalled =\n    window.matchMedia(\"(display-mode: standalone)\").matches ||\n    /\\bmode=standalone\\b/.test(window.location.hash) ||\n    window.location.hostname === \"localhost\";\n\n  return isInstalled;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nlet refreshing = false;\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              if (\n                // eslint-disable-next-line no-restricted-globals\n                confirm(\n                  \"A new version available. Do you to update it by reloading the pages ?\"\n                )\n              ) {\n                installingWorker.postMessage({ type: \"SKIP_WAITING\" });\n              }\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n\n  navigator.serviceWorker.addEventListener(\"controllerchange\", () => {\n    if (refreshing) return;\n    refreshing = true;\n    window.location.reload();\n  });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}